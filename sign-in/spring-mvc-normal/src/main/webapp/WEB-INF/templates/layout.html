<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/1999/html">
<head th:replace="head.html :: common_header(~{::title})" >
    <title th:text="spring.social.mvc.normal.title"></title>
</head>
<body>
    <div class="navbar navbar-default" role="navigation" th:fragment="navbar">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only" th:text="#{label.navigation.toggle.navigation.button}"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand">Spring Social Example</span>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav navbar-left">
                <li sec:authorize="isAuthenticated()">
                    <a th:href="@{/}" th:text="label.navigation.home.link"></a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li sec:authorize="isAnonymous()">
                    <a th:href="@{/user/register}" th:text="#{label.navigation.registration.link}"></a>
                </li>
                <li sec:authorize="isAuthenticated()">
                    <form th:action="@{/logout}" method="POST">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" class="btn btn-default navbar-btn" th:text="#{label.navigation.logout.link}"></button>
                    </form>
                </li>
            </ul>
            <div sec:authorize="isAuthenticated()" class="nav navbar-nav navbar-right navbar-text sign-in-text">
                <div th:with="signInProvider=${}" sec:authentication="principal.socialSignInProvider">
                    <a th:if="@{signInProvider == 'FACEBOOK'}">
                        <i class="icon-facebook-sign"></i>
                    </a>
                    <a th:if="@{signInProvider == 'TWITTER'}">
                        <i class="icon-twitter-sign"></i>
                    </a>
                    <a th:if="@{signInProvider == 'VKONTAKTE'}">
                        <i class="icon-vk-sign"></i>
                    </a>
                    <a th:if="@{empty signInProvider}">
                        <h1 th:text="#{label.navigation.signed.in.as.text}"></h1>
                    </a>
                    <p sec:authentication="principal.username">
                    </p>
                </div>
            </div>
        </div><!-- /.navbar-collapse -->
    </div>
</body>
</html>